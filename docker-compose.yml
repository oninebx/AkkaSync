# Start MVP container with:
# docker-compose up --build

version: "3.9"

services:
  host:
    build:
      context: .
      dockerfile: src/AkkaSync.Host/Dockerfile
    image: akkasync-host
    container_name: akkasync-host
    working_dir: /app
    ports:
      - "5000:5000"
    environment:
      - ASPNETCORE_URLS=http://+:5000
      - PLUGIN_FOLDER=/app/plugins
    volumes:
      - ./mvp/data:/app/data
      - ./mvp/pipelines:/app/pipelines
      - ./mvp/plugins:/app/plugins
      - ./mvp/plugins-swap:/app/plugins-swap
    restart: unless-stopped

  dashboard:
    build:
      context: ./dashboard
      dockerfile: Dockerfile
    image: akkasync-dashboard
    container_name: akkasync-dashboard
    ports:
      - "3000:3000"
    depends_on:
      - host
    restart: unless-stopped