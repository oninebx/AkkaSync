{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "AkkaSync": {
    "Pipelines":[
      {
        "Name": "sync-customer",
        "Schedule": "0 3 * * *",
        "SourceProvider": {
          "Type": "FolderWatcherSourceProvider",
          "Parameters": {
            "folder": "../../samples/inputs/PendingCustomerFiles",
            "source": "csv"
          }
        },
        "TransformerProvider": {
          "Type": "CsvTransformerProvider",
          "Parameters": {
            "transform": "customer"
          }
        },
        "SinkProvider": {
          "Type": "SqliteSinkProvider",
          "Parameters": {
            "connectionString": "Data Source=../../samples/outputs/demostore.db;Mode=ReadWriteCreate;Cache=Shared;Pooling=True;Foreign Keys=True;",
            "batchSize": 10
          }
        },
        "DependsOn": []
      },
      {
        "Name": "sync-product",
        "Schedule": "0 9 * * 1",
        "SourceProvider": {
          "Type": "FolderWatcherSourceProvider",
          "Parameters": {
            "folder": "../../samples/inputs/PendingProductFiles",
            "source": "csv"
          }
        },
        "TransformerProvider": {
          "Type": "CsvTransformerProvider",
          "Parameters": {
            "transform": "product"
          }
        },
        "SinkProvider": {
          "Type": "SqliteSinkProvider",
          "Parameters": {
            "connectionString": "Data Source=../../samples/outputs/demostore.db;Mode=ReadWriteCreate;Cache=Shared;Pooling=True;Foreign Keys=True;",
            "batchSize": 10
          }
        },
        "DependsOn": []
      },
      {
        "Name": "OrderCsvToSqlite",
        "SourceProvider": {
          "Type": "FolderWatcherSourceProvider",
          "Parameters": {
            "folder": "../../samples/inputs/PendingOrderFiles",
            "source": "csv"
          }
        },
        "TransformerProvider": {
          "Type": "CsvTransformerProvider",
          "Parameters": {
            "transform": "order"
          }
        },
        "SinkProvider": {
          "Type": "SqliteSinkProvider",
          "Parameters": {
            "connectionString": "Data Source=../../samples/outputs/demostore.db;Mode=ReadWriteCreate;Cache=Shared;Pooling=True;Foreign Keys=True;",
            "batchSize": 5
          }
        },
        "DependsOn": ["sync-customer"]
      },
      {
        "Name": "OrderItemCsvToSqlite",
        "Schedule": "*/10 * * * *",
        "SourceProvider": {
          "Type": "FolderWatcherSourceProvider",
          "Parameters": {
            "folder": "../../samples/inputs/PendingOrderItemFiles",
            "source": "csv"
          }
        },
        "TransformerProvider": {
          "Type": "CsvTransformerProvider",
          "Parameters": {
            "transform": "orderItem"
          }
        },
        "SinkProvider": {
          "Type": "SqliteSinkProvider",
          "Parameters": {
            "connectionString": "Data Source=../../samples/outputs/demostore.db;Mode=ReadWriteCreate;Cache=Shared;Pooling=True;Foreign Keys=True;",
            "batchSize": 5
          }
        },
        "HistoryStoreProvider":{
          "Type": "InMomeryHistoryStoreProvider",
          "Parameters": {
            "name": "demo"
          }
        },
        "DependsOn": ["OrderCsvToSqlite", "sync-product"]
      },
      {
        "Name": "AuditCsvToSqlite",
        "SourceProvider": {
          "Type": "FolderWatcherSourceProvider",
          "Parameters": {
            "folder": "../../samples/inputs/PendingAuditFiles",
            "source": "csv"
          }
        },
        "TransformerProvider": {
          "Type": "CsvTransformerProvider",
          "Parameters": {
            "transform": "audit"
          }
        },
        "SinkProvider": {
          "Type": "SqliteSinkProvider",
          "Parameters": {
            "connectionString": "Data Source=../../samples/outputs/demostore.db;Mode=ReadWriteCreate;Cache=Shared;Pooling=True;Foreign Keys=True;",
            "batchSize": 5
          }
        },
        "DependsOn": ["OrderCsvToSqlite", "sync-customer"]
      }
    ],
    "Schedules":{
      "sync-customer_daily": {
        "PipelineId": "sync-customer",
        "Cron": "0 3 * * *",
        "Enabled": true
      },
      "sync-product_weekly": {
        "pipelineId": "sync-product",
        "cron": "0 9 * * 1"
      }
    }
  }
}
